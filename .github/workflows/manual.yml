name: Ejecuci√≥n manual de comandos

on:
  workflow_dispatch:
    inputs:
      command:
        description: 'Comando a ejecutar'
        required: true
        type: choice
        options:
          - pnpm run cron diario
          - pnpm run cron mensual
          - pnpm run cron rendimientos
          - pnpm run cron fci
          - pnpm run cron fciIA
          - pnpm run cron riesgoPais
          - pnpm run cron /v1/feriados
          - pnpm run cron /v1/cotizaciones
          - pnpm run cron /v1/finanzas
          - pnpm run cron /v1/finanzas/fci
          - pnpm run cron /v1/finanzas/fciIA
          - pnpm run cron /v1/finanzas/riesgo-pais
          - pnpm run cron /v1/finanzas/rendimientos
          - pnpm run senado:test:run
          - pnpm run diputados:test:run
      needs_build:
        description: 'Ejecutar build antes del comando'
        required: false
        type: boolean
        default: true
      env_preset:
        description: 'Variables de entorno'
        required: false
        type: choice
        options:
          - full
          - minimal
        default: full

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  update:
    uses: ./.github/workflows/reusable-data-update.yml
    with:
      run_command: ${{ inputs.command }}
      needs_build: ${{ inputs.needs_build }}
      env_preset: ${{ inputs.env_preset }}
    secrets: inherit
